(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{365:function(s,a,t){"use strict";t.r(a);var e=t(7),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"chisel-环境搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chisel-环境搭建"}},[s._v("#")]),s._v(" Chisel 环境搭建")]),s._v(" "),a("blockquote",[a("p",[s._v("新手在最开始接触 Chisel 时可能会遇到各种各样的问题，例如怎么构建 Chisel、怎么生成 verilog，网上可能会有一些教程介绍了如何上手 Chisel，但是由于这些年 Chisel 的不断升级迭代，这些教程中提到的一些方法可能已经过时（例如 Chisel 更改了生成 Verilog 的 api、编译器从 SFC 换成了 MLIR)，\n因此本文会记录一些我在搭建 Chisel 开发环境时遇到的坑和注意点。\n"),s._v("\n但是我也还是无法保证本文提供的方法能和未来的 Chisel 兼容 ( Chisel 更新的越来越快了 qwq )。此外，由于我在 Linux 上进行开发，因此本文只介绍 Linux 上的配置方法（如有在 Windows 上开发的需求，请自行搜索）。")])]),s._v(" "),a("h2",{attrs:{id:"什么是-chisel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-chisel"}},[s._v("#")]),s._v(" 什么是 Chisel？")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.chisel-lang.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chisel"),a("OutboundLink")],1),s._v("（Constructing Hardware In a Scala Embedded Language）是 UC Berkeley 开发的一种开源硬件构造语言。它是建构在 Scala 语言之上的领域专用语言（DSL），支持高度参数化的硬件生成器。\nChisel 将硬件构造原语添加到 Scala 编程语言中，为设计人员提供了现代编程语言的强大功能，可以编写复杂的、可参数化的电路生成器，从而生成可综合的 Verilog。 这种生成器方法可以创建可重用的组件和库，例如 Chisel 标准库 中的 FIFO 队列和仲裁器，从而提高了设计的抽象级别，同时保留了细粒度的控制。")]),s._v(" "),a("h2",{attrs:{id:"获取-chisel-模板工程-template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取-chisel-模板工程-template"}},[s._v("#")]),s._v(" 获取 Chisel 模板工程 (template)")]),s._v(" "),a("p",[s._v("这里有一份 "),a("a",{attrs:{href:"https://www.chipsalliance.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chipsalliance"),a("OutboundLink")],1),s._v(" 提供的 "),a("a",{attrs:{href:"https://github.com/chipsalliance/chisel-template",target:"_blank",rel:"noopener noreferrer"}},[s._v("模板工程"),a("OutboundLink")],1),s._v(", 它同时提供了 SBT 和 MILL 的构建配置，我们只需要点击右上角的绿色按钮，选择“Create a new repository”就能开始使用模板了。\n"),a("img",{attrs:{src:"https://emin-blog.oss-cn-shanghai.aliyuncs.com/img/chise-template.png",alt:"使用 Chisel 工程模板"}}),s._v("\n可以自由的选择创建仓库的设置。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://emin-blog.oss-cn-shanghai.aliyuncs.com/img/create-template.png",alt:"创建 Chisel 工程模板"}}),s._v("\n完成创建后将仓库下载到本地就能开始开发了。\n"),a("img",{attrs:{src:"https://emin-blog.oss-cn-shanghai.aliyuncs.com/img/clone-template.png",alt:"下载模板工程"}})]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("如果你不想在自己的 Github 上创建模板工程，也可以直接下载 chipsalliance 提供的模板（在 shell 中执行如下命令）。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/chipsalliance/chisel-template.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("h2",{attrs:{id:"安装依赖软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖软件包"}},[s._v("#")]),s._v(" 安装依赖软件包")]),s._v(" "),a("p",[s._v("Chisel 主要依赖 JDK、SBT/MILL 和 Verilator ( 模板中的测试使用 svsim，需要 Verilator 作为测试后端 )。")]),s._v(" "),a("h3",{attrs:{id:"安装-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-jdk"}},[s._v("#")]),s._v(" 安装 JDK")]),s._v(" "),a("p",[s._v("各种 Linux 发行版的包管理器上一般都会有提供 JDK 的下载\n例如在 Ubuntu 上执行：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openjdk-11-jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在 Arch Linux 上执行：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pacman "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" jdk11-openjdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("要查看安装好的 Java 版本：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果有正常输出，则表示安装成功")]),s._v(" "),a("h3",{attrs:{id:"安装-verilator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-verilator"}},[s._v("#")]),s._v(" 安装 Verilator")]),s._v(" "),a("p",[s._v("由于这个 Chisel 模板工程中的测试需要使用 Verilator 作为测试后端，所以我们还需要安装 Verilator，安装教程在 "),a("RouterLink",{attrs:{to:"/notes/IC/verilator/start/"}},[s._v("这里")]),s._v("。")],1),s._v(" "),a("h3",{attrs:{id:"安装-mill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-mill"}},[s._v("#")]),s._v(" 安装 MILL")]),s._v(" "),a("p",[s._v("Scala 构建工具主要有 SBT 和 MILL 两种，我选择的构建工具是 MILL ,"),a("a",{attrs:{href:"https://www.lihaoyi.com/post/SoWhatsSoSpecialAboutTheMillScalaBuildTool.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),a("OutboundLink")],1),s._v(" 介绍了不同构建工具之间的区别，MILL 的构建配置文件 (build.sc) 更为简洁、有更好的可读性，此外还可以在构建配置文件中使用函数式编程。\n要获取 MILL 可以在 shell 中执行下面这行命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" https://github.com/com-lihaoyi/mill/releases/download/0.11.5/0.11.5 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mill "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x mill\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这时候你会发现在当前文件夹下面多出了一个 MILL，这时我们可以选择将其移动到系统路径 ( PATH ) 中，也可以选择在当前文件夹下面使用 （执行"),a("code",[s._v("./mill")]),s._v(") 。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("关于 MILL 工具的教程，可以看这个 "),a("a",{attrs:{href:"https://alvinalexander.com/scala/mill-build-tool/intro/",target:"_blank",rel:"noopener noreferrer"}},[s._v("博客"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"开始构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始构建"}},[s._v("#")]),s._v(" 开始构建")]),s._v(" "),a("p",[s._v("接下来我们可以开始测试 Chisel 代码能否正常构建了，我们来到刚刚下载好的模板工程文件夹下面执行：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mill %NAME%.test "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# %NAME%应该被替换为我们工程的名字，build.sc 中的%NAME%也应该做相应的修改")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("会得到如下的输出：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" playground.test "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我这将%NAME%替换为了 playground")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("build.sc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v("/52"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" compile\nCompiling compiler interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" compiling "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" Scala "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" to /home/emin/workbench/test/chisel-template/out/mill-build/compile.dest/classes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" compiling\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("/83"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" playground.compile\nCompiling compiler interface"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" compiling "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" Scala sources to /home/emin/workbench/test/chisel-template/out/playground/compile.dest/classes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" compiling\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("76")]),s._v("/83"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" playground.test.compile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" compiling "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" Scala "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" to /home/emin/workbench/test/chisel-template/out/playground/test/compile.dest/classes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" compiling\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("/83"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" playground.test.test\nGCDSpec:\n- Gcd should calculate proper greatest common denominator\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("这说明我们已经成功构建 Chisel 。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("如果没有修改 %NAME% 直接执行"),a("code",[s._v("mill %NAME%.test")]),s._v("则会得到类似于下面的输出：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" targets failed\ngenerateScriptSources build.sc:10:9 expected "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"}"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" end-of-input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nobject %NAME% extends SbtModule "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" m "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ^\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("这时我们需要到 "),a("code",[s._v("build.sc")]),s._v(" 中将"),a("code",[s._v("%NAME")]),s._v("替换为我们工程的名字。我这将"),a("code",[s._v("%NAME%")]),s._v("修改为了"),a("code",[s._v("playground")]),s._v("，所以 "),a("code",[s._v("build.sc")]),s._v(" 应该是：")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("点击查看")]),s._v(" "),a("div",{staticClass:"language-scala line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("object")]),s._v(" playground "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" SbtModule "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("=>")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("override")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" millSourcePath "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pwd\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("override")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" scalaVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.13.12"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("override")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" scalacOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Seq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-language:reflectiveCalls"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-deprecation"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-feature"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xcheckinit"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("override")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" ivyDeps "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Agg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token id function"}},[s._v("ivy")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.chipsalliance::chisel:6.2.0"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("override")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" scalacPluginIvyDeps "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Agg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token id function"}},[s._v("ivy")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.chipsalliance:::chisel-plugin:6.2.0"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("object")]),s._v(" test "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" SbtModuleTests "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" TestModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ScalaTest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("override")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" ivyDeps "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ivyDeps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" Agg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token id function"}},[s._v("ivy")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.scalatest::scalatest::3.2.16"')])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])])])]),s._v(" "),a("p",[s._v("如果需要生成 Verilog 文件，则执行下面这行命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ mill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" playground.runMain gcd.GCD\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("这里的"),a("code",[s._v("playground")]),s._v("是我们刚刚修改的"),a("code",[s._v("%NAME%")]),s._v("，"),a("code",[s._v("gcd")]),s._v("是"),a("code",[s._v("GCD.scala")]),s._v("文件所在的软件包（在 src/main/scala/gcd 目录下），在"),a("code",[s._v("GCD.scala")]),s._v("中定义了如下的伴生对象：")]),s._v(" "),a("div",{staticClass:"language-scala line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("object")]),s._v(" GCD "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" App "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  ChiselStage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("emitSystemVerilogFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" GCD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    firtoolOpts "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-disable-all-randomization"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-strip-debug-info"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("其中"),a("code",[s._v("ChiselStage.emitSystemVerilogFile")]),s._v("就是生成 System Verilog 文件的 Api，我们执行这个伴生对象就可以生成 Verilog 了。\n模板工程中其实还提供了"),a("code",[s._v("DecoupledGCD")]),s._v("，如果想要生成它的 System Verilog 文件，则只需将"),a("code",[s._v("new GCD")]),s._v("替换为"),a("code",[s._v("new DecoupledGCD")]),s._v("就可以生成对应的文件 ("),a("code",[s._v("DecoupledGCD")]),s._v("需要提供宽度参数，因此需要改成类似于"),a("code",[s._v("new Decoupled(2)")]),s._v(")。\n你也可以将生成 Verilog 文件的对象改为其他名称，只需要修改对应的生成命令，保持上文提到的规则就可以了 ( "),a("code",[s._v("mill -i %NAME%.runMain 软件包。对象名")]),s._v(" )。")])]),s._v(" "),a("h2",{attrs:{id:"使用-mill-生成-ide-support"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-mill-生成-ide-support"}},[s._v("#")]),s._v(" 使用 MILL 生成 IDE Support")]),s._v(" "),a("p",[s._v("MILL 的 "),a("a",{attrs:{href:"https://mill-build.com/mill/Installation_IDE_Support.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("文档"),a("OutboundLink")],1),s._v(" 中有对如何生成 IDE 支持进行说明。\n要生成 BSP Support：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mill mill.bsp.BSP/install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("要生成 IDEA 支持：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mill mill.idea.GenIdea/idea\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("JetBrains 公司推出 Java 开发工具 "),a("a",{attrs:{href:"https://www.jetbrains.com/idea/",target:"_blank",rel:"noopener noreferrer"}},[s._v("IDEA"),a("OutboundLink")],1),s._v(" 有较为智能的补全提示和无缝的开箱即用体验，因此我个人更推荐使用 IDEA 进行 Chisel 开发")])]),s._v(" "),a("h2",{attrs:{id:"可能会遇到的坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可能会遇到的坑"}},[s._v("#")]),s._v(" 可能会遇到的坑")]),s._v(" "),a("h3",{attrs:{id:"verilator-需要-c-14-特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#verilator-需要-c-14-特性"}},[s._v("#")]),s._v(" Verilator 需要 C++14 特性")]),s._v(" "),a("p",[s._v("如果你安装的 Verilator 是 "),a("code",[s._v("5.020")]),s._v(" 以上的版本，同时使用了 "),a("code",[s._v("Chisel6.2.0")]),s._v(" 以下的版本，在运行"),a("code",[s._v("mill -i __.test")]),s._v("时可能会遇到如下报错：")]),s._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[s._v("点击查看")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" compiling\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v("/83"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" playground.test.test\nGCDSpec:\n- Gcd should calculate proper greatest common denominator *** FAILED ***\n  java.lang.Exception: make: Entering directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" Makefile "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" execution-script.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n/usr/local/bin/verilator "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("::: details\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--cc'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--exe'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--build'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-o'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../simulation'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--top-module'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'svsimTestbench'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--Mdir'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'verilated-sources'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-CFLAGS'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-std=c++11 -I/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default -DSVSIM_ENABLE_VERILATOR_SUPPORT'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../primary-sources/DecoupledGcd.sv'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'testbench.sv'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../generated-sources/c-dpi-bridge.cpp'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../generated-sources/simulation-driver.cpp'")]),s._v("\nmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Entering directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default/verilated-sources'")]),s._v("\nccache clang++  -I.  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-MMD")]),s._v(" -I/usr/local/share/verilator/include -I/usr/local/share/verilator/include/vltstd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_COVERAGE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_SC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_TRACE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_TRACE_FST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_TRACE_VCD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -faligned-new -fbracket-depth"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -fcf-protection"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none -Qunused-arguments -Wno-bool-operation -Wno-c++11-narrowing -Wno-constant-logical-operand -Wno-non-pod-varargs -Wno-parentheses-equality -Wno-shadow -Wno-sign-compare -Wno-tautological-bitwise-compare -Wno-tautological-compare -Wno-uninitialized -Wno-unused-but-set-parameter -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-unused-variable    "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-std")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c++11 -I/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DSVSIM_ENABLE_VERILATOR_SUPPORT")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Os")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" c-dpi-bridge.o c-dpi-bridge.cpp\nccache clang++  -I.  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-MMD")]),s._v(" -I/usr/local/share/verilator/include -I/usr/local/share/verilator/include/vltstd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_COVERAGE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_SC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_TRACE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_TRACE_FST")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DVM_TRACE_VCD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -faligned-new -fbracket-depth"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -fcf-protection"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("none -Qunused-arguments -Wno-bool-operation -Wno-c++11-narrowing -Wno-constant-logical-operand -Wno-non-pod-varargs -Wno-parentheses-equality -Wno-shadow -Wno-sign-compare -Wno-tautological-bitwise-compare -Wno-tautological-compare -Wno-uninitialized -Wno-unused-but-set-parameter -Wno-unused-but-set-variable -Wno-unused-parameter -Wno-unused-variable    "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-std")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c++11 -I/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DSVSIM_ENABLE_VERILATOR_SUPPORT")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Os")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" simulation-driver.o simulation-driver.cpp\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from simulation-dri::: detailsver.cpp:883:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from ./VsvsimTestbench.h:11:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from /usr/local/share/verilator/include/verilated.h:42:\n/usr/local/share/verilator/include/verilatedos.h:265:3: error: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Verilator requires a C++14 or newer compiler"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("265")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# error "Verilator requires a C++14 or newer compiler"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ^\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from simulation-driver.cpp:883:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from ./VsvsimTestbench.h:11:\n/usr/local/share/verilator/include/verilated.h:76:22: error: expected namespace name\n   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("76")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" using namespace std::literals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  // "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<std::string literal>"')]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" see SF.7 core guideline\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                 ~~~~~^\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from simulation-driver.cpp:883:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from ./VsvsimTestbench.h:11:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from /usr/local/sha::: detailsre/verilator/include/verilated.h:950:\n/usr/local/share/verilator/include/verilated_types.h:266:24: error: invalid suffix on literal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" C++11 requires a space between literal and identifier "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Wreserved-user-defined-literal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("266")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"triggered="')]),s._v("s + "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.isTriggered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ? "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                        ^\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                         \n/usr/local/share/verilator/include/verilated_types.h:266:24: error: expected "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("';'")]),s._v(" after "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" statement\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("266")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"triggered="')]),s._v("s + "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.isTriggered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ? "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                        ^\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n/usr/local/share/verilator/include/verilated_types.h:277:24: error: invalid suffix on literal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" C++11 requires a space between literal and identifier "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Wreserved-user-defined-literal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("277")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"triggered="')]),s._v("s + "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.isTriggered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ? "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                        ^\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                         \n/usr/local/share/verilator/include/verilated_types.h:277:24: error: expected "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("';'")]),s._v(" after "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" statement\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("277")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"triggered="')]),s._v("s + "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.isTriggered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ? "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                        ^\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n/usr/local/share/verilator/include/verilated_types.h:1651:18: error: no member named "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exchange'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" namespace "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'std'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" did you mean "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v("?\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1651")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" m_objp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("std::exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moved.m_objp, nullptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  ^~~~~~~~~~~~~\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  vlstd::exchange\n/usr/local/share/verilator/include/verilatedos.h:642:3: note: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v(" declared here\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("642")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" T exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" obj, U"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" new_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ^\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from simulation-driver.cpp:883:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from ./VsvsimTestbench.h:11:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from /usr/local/share/verilator/include/verilated.h:950:\n/usr/local/share/verilator/include/verilated_types.h:1661:18: error: no member named "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exchange'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" namespace "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'std'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" did you mean "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v("?\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1661")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" m_objp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("std::exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moved.m_objp, nullptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  ^~~~~~~~~~~~~\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  vlstd::exchange\n/usr/local/share/verilator/include/verilatedos.h:642:3: note: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v(" declared here\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("642")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" T exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" obj, U"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" new_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ^\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from simulation-driver.cpp:883:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from ./VsvsimTestbench.h:11:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from /usr/local/share/verilator/include/verilated.h:950:\n/usr/local/share/verilator/include/verilated_types.h:1676:18: error: no member named "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exchange'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" namespace "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'std'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" did you mean "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v("?\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1676")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         m_objp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" std::exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moved.m_objp, nullptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  ^~~~~~~~~~~~~\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  vlstd::exchange\n/usr/local/share/verilator/include/verilatedos.h:642:3: note: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v(" declared here\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("642")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" T exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" obj, U"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" new_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ^\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from simulation-driver.cpp:883:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from ./VsvsimTestbench.h:11:\nIn "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" included from /usr/local/share/verilator/include/verilated.h:950:\n/usr/local/share/verilator/include/verilated_types.h:1691:18: error: no member named "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exchange'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" namespace "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'std'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" did you mean "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v("?\n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1691")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         m_objp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" std::exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("moved.m_objp, nullptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  ^~~~~~~~~~~~~\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                  vlstd::exchange\n/usr/local/share/verilator/include/verilatedos.h:642:3: note: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vlstd::exchange'")]),s._v(" declared here\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("642")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" T exchange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("T"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" obj, U"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" new_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("   ^\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" errors generated.\nmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("VsvsimTestbench.mk:65: simulation-driver.o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default/verilated-sources'")]),s._v("\n%Error: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" verilated-sources "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" VsvsimTestbench.mk "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" exited with "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n%Error: Command Failed "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("ulimit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" unlimited "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("/dev/null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" /usr/local/bin/verilator_bin "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--build")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/simulation --top-module svsimTestbench "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--Mdir")]),s._v(" verilated-sources "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-CFLAGS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-std")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c++11"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" -I/tmp/chisel3.simulator.EphemeralSimulator/721927"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("@archlinux/workdir-default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DSVSIM_ENABLE_VERILATOR_SUPPORT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/primary-sources/DecoupledGcd.sv testbench.sv "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/generated-sources/c-dpi-bridge.cpp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/generated-sources/simulation-driver.cpp\nmake: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Makefile:12: simulation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nmake: Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/tmp/chisel3.simulator.EphemeralSimulator/721927@archlinux/workdir-default'")]),s._v("\n  at svsim.Workspace.compile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Workspace.scala:390"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.Simulator"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WorkspaceCompiler")]),s._v(".liftedTree1"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Simulator.scala:60"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.Simulator"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WorkspaceCompiler")]),s._v(".process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Simulator.scala:53"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.SingleBackendSimulator.processBackends"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Simulator.scala:139"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.SingleBackendSimulator.processBackends"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("Simulator.scala:138"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  at chisel3.simulator.EphemeralSimulator"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DefaultSimulator")]),s._v(".processBackends"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EphemeralSimulator.scala:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.Simulator._simulate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Simulator.scala:116"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.Simulator._simulate"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("Simulator.scala:97"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n  at chisel3.simulator.EphemeralSimulator"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DefaultSimulator")]),s._v("._simulate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("EphemeralSimulator.scala:27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  at chisel3.simulator.SingleBackendSimulator.simulate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Simulator.scala:146"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" targets failed\nplayground.test.test "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tests failed: \n  gcd.GCDSpec Gcd should calculate proper greatest common denominator\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br")])])]),s._v(" "),a("p",[s._v("这是因为 Verilator 从"),a("code",[s._v("5.020")]),s._v("版本起需要 "),a("code",[s._v("C++14")]),s._v(" 标准，而 "),a("code",[s._v("Chisel6.2.0")]),s._v(" 版本之前的代码中限制了 C++标准为 "),a("a",{attrs:{href:"https://github.com/chipsalliance/chisel/pull/3876",target:"_blank",rel:"noopener noreferrer"}},[s._v("C++11"),a("OutboundLink")],1),s._v("。\n解决方法：")]),s._v(" "),a("ol",[a("li",[s._v("使用 "),a("code",[s._v("Chisel6.2.0")]),s._v(" 。")]),s._v(" "),a("li",[s._v("放弃使用 svsim 测试（大部分时候都不需要，但是个人觉得 svsim 用作单元测试还是挺不错的）。")])]),s._v(" "),a("h3",{attrs:{id:"firtool-引发的一系列问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#firtool-引发的一系列问题"}},[s._v("#")]),s._v(" firtool 引发的一系列问题")]),s._v(" "),a("p",[s._v("从 Chisel3.6 版本开始，Chisel 开始使用 firtool (LLVM "),a("a",{attrs:{href:"https://github.com/llvm/circt",target:"_blank",rel:"noopener noreferrer"}},[s._v("CIRCT"),a("OutboundLink")],1),s._v(" 项目的一部分）来生成 Verilog，好消息是现在 Chisel 开始使用 "),a("a",{attrs:{href:"https://github.com/chipsalliance/firtool-resolver",target:"_blank",rel:"noopener noreferrer"}},[s._v("firtool-resolver"),a("OutboundLink")],1),s._v(" 来自动下载 firtool 依赖。\n如果你在系统中已经安装了 firtool, 但是 firtool 版本和 Chisel 不适配，那么在生成 Verilog 的时候会报错。\n要解决这个问题问题，需要 "),a("a",{attrs:{href:"https://github.com/llvm/circt/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载"),a("OutboundLink")],1),s._v(" 对应版本的 firtool ，并将它加入到"),a("code",[s._v("PATH")]),s._v("中。")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("根据这里的版本对应 "),a("a",{attrs:{href:"https://www.chisel-lang.org/docs/appendix/versioning",target:"_blank",rel:"noopener noreferrer"}},[s._v("说明"),a("OutboundLink")],1),s._v("，下载对应的 firtool ！")])])])}),[],!1,null,null,null);a.default=n.exports}}]);